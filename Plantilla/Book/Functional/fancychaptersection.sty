\ProvidesPackage{fancychaptersection}
%%%%%%%%%%%%%%%%% CHAPTER
\newcommand*\chapterlabel{}
\titleformat{\chapter}
{\gdef\chapterlabel{}
\fontsize{40}{50}\selectfont\comfortaa\bfseries
}
{\gdef\chapterlabel{\chaptername \ \thechapter}}{0pt}
{\begin{tikzpicture}[remember picture,overlay]
        \node[yshift=-3cm] at (current page.north west)
        {\begin{tikzpicture}[remember picture, overlay]
                \draw[draw=none,fill=SaddleBrown] (0,0) rectangle
                (\paperwidth,3cm);
                \node[anchor=east,xshift=.9\paperwidth,rectangle,
                    rounded corners=2pt,inner xsep=50pt,inner ysep=20pt,
                    blur shadow={
                        shadow opacity=30, 
                        shadow yshift=-2mm,
                        shadow blur steps=30,
                        shadow blur extra rounding=2pt
                        },
                    fill=DimGray!60]
                {\color{DarkGray!10}\textbf{\chapterlabel#1}};
            \end{tikzpicture}
        };
    \end{tikzpicture}
}
\titlespacing*{\chapter}{0pt}{50pt}{-60pt}
%%%%%%%%%%%%%%%%% SECTION
\newcommand*\sectionlabel{}
\titleformat{\section}
{\gdef\sectionlabel{}
    \comfortaa\Large\bfseries
}
{\gdef\sectionlabel{ \ }}{0pt}
{\begin{tikzpicture}[remember picture,overlay]
        \node[yshift=-1.5cm] at (current page.north west)
        {\begin{tikzpicture}[remember picture, overlay]
                \draw[draw=none,fill=FireBrick,
                    %shade,
                    rounded corners=5pt,
                    blur shadow={shadow blur steps=10,shadow blur extra rounding=10pt},
                    xshift=5mm,
                ] (0,0) rectangle
                (\paperwidth-10mm,2cm);
                \node[
                    anchor=west,
                    xshift=0.18\paperwidth,
                    rectangle,
                    %shade,
                    rounded corners=5pt,
                    inner sep=8pt,
                    fill=DarkGoldenrod,
                    %drop shadow={fill=black, opacity=1},
                ]
                {\color{DarkGray!10}\sectionlabel#1};
                \node[anchor=west,xshift=0.1\paperwidth, rectangle, rounded corners=5pt, inner sep=8pt,fill=colorrds]
                {  \color{DarkGray!05}\textbf{\Huge\thesection} };
            \end{tikzpicture}
        };
    \end{tikzpicture}
}
\titlespacing*{\section}{0pt}{50pt}{0pt}
%%%%%%%%%%%%%%%%% SUBSECTION
\newcommand*\subsectionlabel{}
\titleformat{\subsection}
{\gdef\subsectionlabel{}
\fontsize{12}{15}\selectfont\comfortaa\bfseries
}
{\gdef\subsectionlabel{}}{0pt}
{\begin{tikzpicture}[remember picture, overlay]
                \draw[draw=none,fill=colorrds,rounded corners=5pt,] (0,0) rectangle
                (\textwidth,1cm);
                \node[anchor=center,xshift=.5\textwidth, rectangle,
                    rounded corners=2pt,inner xsep=20pt,inner ysep=10pt,
                    blur shadow={
                        shadow opacity=30, 
                        shadow yshift=-2mm,
                        shadow blur steps=30,
                        shadow blur extra rounding=2pt
                        },
                    fill=OliveDrab]
                {
                    \parbox{0.6\textwidth}{\centering
                        \color{DarkGray!10}\textbf{\subsectionlabel#1}
                      }%
                    };
                    \node[anchor=west,xshift=.12\textwidth ,yshift=2mm,circle,inner xsep=5pt,inner ysep=5pt,fill=FireBrick]
                {  \color{DarkGray!05}\textbf{\fontsize{15}{18}\selectfont\thesubsection} };
            \end{tikzpicture}
        }
\titlespacing*{\subsection}{0pt}{10pt}{35pt}