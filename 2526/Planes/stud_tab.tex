\documentclass[12pt]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{cicloescolar}
\usepackage[most]{tcolorbox}
\tcbuselibrary{skins,raster,breakable} % Load the breakable library
\usepackage{amssymb}
\usepackage{tabularx}
\usepackage[landscape,margin=0.4in]{geometry}
\usepackage{ragged2e}
\usepackage{multicol,multirow}
\usepackage{jsonparse} % Load the json package
\usepackage{anyfontsize}
\usepackage{adjustbox}
\usepackage{graphicx} % for \scalebox
\usepackage{xcolor} % For defining colors
\usepackage{colortbl} % For coloring table elements
\usepackage{ifthen}
\usepackage{enumitem} % for custom \item
\usepackage{xparse} %for NewDocumentCommand
\usepackage{etoolbox}
% \usepackage{l3sys-query} %for query JSON files
% \usepackage{lipsum}
\usepackage{shadowtext}
\shadowoffset{0.4pt}
\shadowcolor{black}

\DTMsetdatestyle{fechacorta}
\pagestyle{empty}
\newcolumntype{Y}{>{\RaggedRight\arraybackslash}X}
\renewcommand{\arraystretch}{1.2}

\arrayrulecolor{rdsColor}
\setlength{\columnsep}{10pt}
\setlength{\arrayrulewidth}{0.1pt}
%%% DEFINITIONS

\tcbset{
    unitbox/.style={
        colbacktitle=white,
        colback=rdsColor!0.5!white,
         colframe=rdsColor,
        colframe=white,
        coltitle=black,
        boxrule=0.4pt,
        boxsep=0pt,
        left=10pt,
        right=10pt,
        top=10pt,
        bottom=10pt,
        subtitle style={
            fontupper=\sffamily,
            boxrule=0.2pt,
            boxsep=2mm,
            top=0mm,
            bottom=0mm,
            colback=rdsColor!10,
            colupper=green!30!black,
        }
    },
    semanabox/.style={
        coltitle=green!30!black,
        colframe=rdsColor,
        colback=rdsColor!1!white,
        colbacktitle=rdsColor!10,
        boxrule=0.1pt,
        frame style={rdsColor},
        top=0pt,
        bottom=0pt,
        left=-7pt,
        right=0pt
    }
}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt,fill=white,circular glow={fill=rdsColor!40!white}] (char) {#1};}}
\newcommand*\cte[1]{\tikz[baseline=(char.base)]{
			\node[shape=circle,inner sep=2pt,pattern={Lines[distance=2pt, angle=45, line width=0.1pt]},pattern color=green!50!black] (char) {#1};}}
\newcommand*\free[1]{\tikz[baseline=(char.base)]{
			\node[shape=circle,inner sep=2pt,pattern={Lines[distance=2pt, angle=-45, line width=0.1pt]},pattern color=red!50!black] (char) {#1};}}
\newcommand*\exam[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt,fill=white] (char) {#1};}}
\newcommand*\padres[1]{\tikz[baseline=(char.base)]{
            \node[shape=rectangle,draw=black!75,fill=white] (char) {#1};}}
\newcommand*\booknode[1]{\tikz[baseline=(char.base)]{
            \node[shape=rounded rectangle,line width=0.5pt,draw=rdsColor!50,
            rounded rectangle east arc=concave,xshift=-0.35em,
            inner xsep=0pt,inner ysep=4pt,
            % pattern={Lines[distance=0.5pt, angle=0, line width=0.1pt]},pattern color=green!50!black,
            fill=rdsColor!50!white,
            scale=1,overlay] (char) {#1};
            % \begin{scope}[on background layer]
            %     \fill[white,hape=rounded rectangle,rounded rectangle east arc=concave,xshift=-0.4em,] (-.8,-.8) rectangle (.8,.8);
            %   \end{scope}
            }}

\def\LOGO{%
    \begin{picture}(0,0)\unitlength=3cm
        \put (0.05,-0.61) {\includegraphics[width=3cm]{logo_shadow.png}}
        \put (0.045,-0.6) {\includegraphics[width=3cm]{logo.png}}
    \end{picture}
}



\newcommand{\plannerof}[3]{%
    \def\disciplina{\classtitle{#2#1}}
    \def\gradogrupo{\leveltitle{#1}}
    \JSONParseFromFile{\weekdata}{#2#1_u#3.json}
    \JSONParseValue[store in=\campoformativo]{\weekdata}{general.CampoFormativo}
% \JSONParseValue[store in=\disciplina]{\weekdata}{general.Disciplina}
\JSONParseValue[store in=\grado]{\weekdata}{general.Grado}
\JSONParseValue[store in=\nivel]{\weekdata}{general.Nivel}
\JSONParseValue[store in=\unidad]{\weekdata}{general.Unidad}
\JSONParseValue[store in=\nombreunidad]{\weekdata}{general.NombreDeLaUnidad}
\JSONParseValue[store in=\duracion]{\weekdata}{general.DuracionEnSemanas}
\JSONParseValue[store in=\horasporsemana]{\weekdata}{general.HorasPorSemana}
\JSONParseValue[store in=\horastotales]{\weekdata}{general.HorasTotales}
\JSONParseValue[store in=\docente]{\weekdata}{general.Docente}
\JSONParseValue[store in=\fechainicial]{\weekdata}{general.FechaInicial}
\JSONParseValue[store in=\fechafinal]{\weekdata}{general.FechaFinal}
\JSONParseValue[store in=\fechacreacion]{\weekdata}{general.FechaDeCreacion}
\JSONParseValue[store in=\fechaupdate]{\weekdata}{general.FechaDeActualizacion}
    \def\schoolinfounit{\RaggedRight%
        {\color{rdsColor}\Large Escuela Rafael Díaz Serdán}\\[-0.5em]
        {\color{gray!40!black}\scriptsize\sffamily 30PES0329R \hspace{10em} turno matutino  }\\
        {\color{green!20!black}\large\sffamily Plan de Trabajo Escolar}\\
        {\sffamily Profesor:}\docente \\ 
        \campoformativo \\
        \large{\shadowtext{\gradogrupo} \qquad \shadowtext{\disciplina}}
        
    }
    \def\unitinfo{%
        \tcbox[colback=rdsColor!5!white,colframe=rdsColor,size=fbox,on line]{ {\sffamily Unidad} #3}
    }
    \def\cicloescolar{%
        \tcbox[colback=red!10!white,colframe=rdsColor,size=fbox,on line]{\currentyear-\nextyear}
    }
    %\QueryFiles[reverse]{*.json}{\JSONParseFromFile{\weekdata}{##1}}
    % \def\unitcalendar{
        % \unitcalendarselector{#3}
    % }
}
% Comando para el diseño del encabezado
\def\unitboxtitle{%
   \begin{minipage}{0.15\textwidth}
        \LOGO
    \end{minipage}%
  \begin{minipage}{0.4\textwidth}
        \schoolinfounit
    \end{minipage}%
}



\newcommand{\rangofechas}[2]{%
    \tcbox[on line,size=fbox,arc=1.5pt,boxrule=0.5pt,colback=orange!10!white,colframe=rdsColor!50,sharp corners,rounded corners=west]{% sharp corners=southeast,
    \large\textsc{\DTMdate{#1}< \DTMdate{#2}}%
    }%
}




% \def\fillingradebox{\resizebox{1cm}{1em}{\raisebox{-0.16em}{$\Box$}}}
\newcommand{\fillingradebox}[1][]{\tikz[overlay]{\draw[black!75,thin,rounded corners=1,#1] (0,0) rectangle (1, 1);}}

\newcommand{\boxesline}{%
\begin{tikzpicture}[yshift=-0.2em]
    \foreach \x in {0,...,4} {
 \begin{scope}[shift={(\x*1.0,0)}]
            % Dibujamos las 3 caras visibles del cubo
            % Todas tienen borde negro (por defecto) y relleno blanco
            % \draw[fill=white] (0.2,0.2) rectangle (1.7,1.7);
            % \draw[fill=white] (0,0) -- ++(0.2,-0.2) -- ++(1.2,0) -- ++(-0.2,0.2) -- cycle; % Cara superior
            %  \draw[fill=white] (1.2,0) -- ++(0.2,-0.2) -- ++(0,1.2) -- ++(-0.2,0.2) -- cycle;; % Cara lateral derecha
             \draw[fill=white,drop shadow=black,rounded corners,] (0,0) rectangle (1.0,1.0);                                     % Cara frontal
        \end{scope}
    }
\end{tikzpicture}
}

\newcommand{\boxesbox}{%
\begin{tikzpicture}[yshift=-0.2em,rotate=270]
    \foreach \x in {0,...,0}{
 \begin{scope}[shift={(\x*1.0,0)}]
            % Dibujamos las 3 caras visibles del cubo
            % Todas tienen borde negro (por defecto) y relleno blanco
            % \draw[fill=white] (0.2,0.2) rectangle (1.7,1.7);
            % \draw[fill=white] (0,0) -- ++(0.2,-0.2) -- ++(1.2,0) -- ++(-0.2,0.2) -- cycle; % Cara superior
            %  \draw[fill=white] (1.2,0) -- ++(0.2,-0.2) -- ++(0,1.2) -- ++(-0.2,0.2) -- cycle;; % Cara lateral derecha
             \draw[fill=white,drop shadow=black,rounded corners,] (0,0) rectangle (1.0,1.0);                                     % Cara frontal
        \end{scope}
    }
\end{tikzpicture}
}

\def\itembox{%
    \tcbox[enhanced,on line,drop fuzzy shadow=black,size=fbox,colback=orange!10!white]{\fontsize{20}{8}\selectfont\JSONParseArrayValue}\quad\raisebox{-0.75em}{\boxesline}\\
}

\def\columnbox{%
\rotatebox{90}{\quad\tcbox[enhanced,on line,drop fuzzy shadow=black,size=fbox,colback=violet!10!white]{\fontsize{20}{8}\selectfont\JSONParseArrayValue}} %
}

\begin{document}
%%  \planner{grado}{materia}{unidad}
% \plannerof{0}{test}{1}%%
\plannerof{1}{math}{1}%
%   \plannerof{2}{math}{1}%
%   \plannerof{3}{math}{1}%
%   \plannerof{3}{chem}{1}%   
%   \plannerof{2}{phys}{1}%
% \begin{tcolorbox}[unitbox,title=\unitboxtitle,breakable,halign=right]
	% \begin{center}\scshape\large\color{rdsColor}
	% 	\shadowtext{Datos generales}
	% \end{center}
	% \campoformativo \\
	% \disciplina \\
	% \grado \\
	% \nivel \\
	% \unidad \\
	% \nombreunidad \\
	% \duracion \\
	% \horasporsemana \\
	% \horastotales \\
	% \docente \\
	% \fechainicial \\
	% \fechafinal \\
	% \fechacreacion \\
	% \fechaupdate 
	
	%   \JSONParseArrayMapInline{\weekdata}{general.Alumnos}{\JSONParseArrayValue}
   \begin{minipage}{0.2\textwidth}
        \includegraphics[width=4cm]{logo.png}\\
        {\huge\cicloescolar\\\unitinfo}\\ \vfill
        \rotatebox{90}{\Huge{\shadowtext{\campoformativo}}} \ %
         \rotatebox{90}{\fontsize{42}{24}\selectfont\shadowtext{\gradogrupo}} \ %
         \rotatebox{90}{\fontsize{42}{24}\selectfont\shadowtext{\disciplina}} 
    \end{minipage}%
    \begin{minipage}{0.75\textwidth}\RaggedLeft%
        \begin{center}
            \scshape\huge \color{rdsColor}\shadowtext{Alumnos}
        \end{center}
          \JSONParseArrayMapFunction[
                    code before={},
                    code after={}
                ]{\weekdata}{general.Alumnos}{\itembox}
    \end{minipage}
    
% \end{tcolorbox}
\newpage\noindent
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\ 
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\boxesline\\
\newpage\noindent
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\ 
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\boxesline\boxesline\boxesline\boxesline\\
\newpage\noindent
\JSONParseArrayMapFunction[
    code before={},
    code after={}
]{\weekdata}{general.Nociones}{\columnbox}\\
% \boxesline\boxesline\boxesline \boxesline \boxesline\boxesline
\end{document}